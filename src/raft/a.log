go test -run TestInitialElection2A
2020/03/08 18:29:06 [0] transition to follower [term:0]
2020/03/08 18:29:06 [node:0][role:1][term:0]start
2020/03/08 18:29:06 [1] transition to follower [term:0]
2020/03/08 18:29:06 [node:1][role:1][term:0]start
2020/03/08 18:29:06 [2] transition to follower [term:0]
2020/03/08 18:29:06 [node:2][role:1][term:0]start
Test (2A): initial election ...
2020/03/08 18:29:06 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [0] to [1]
2020/03/08 18:29:06 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [0] to [1]
2020/03/08 18:29:06 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [0] to [1]
leaders[map[]]
2020/03/08 18:29:06 [2] start vote term[0]
2020/03/08 18:29:06 [2] Set term [1]
2020/03/08 18:29:06 [2] vote for [2]
2020/03/08 18:29:06 [0] accept RequestVote from [2] , args:[&{Term:1 CandidateId:2 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:06 [0] vote for [2]
2020/03/08 18:29:06 [1] accept RequestVote from [2] , args:[&{Term:1 CandidateId:2 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:06 [0] Set term [1]
2020/03/08 18:29:06 [0] transition to follower [term:1]
2020/03/08 18:29:06 [1] vote for [2]
2020/03/08 18:29:06 [1] Set term [1]
2020/03/08 18:29:06 [1] transition to follower [term:1]
2020/03/08 18:29:06 [2] vote fail2 from [0]
2020/03/08 18:29:06 [2] vote fail2 from [1]
2020/03/08 18:29:06 [2] transition to follower [term:1]
2020/03/08 18:29:06 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [1] to [2]
2020/03/08 18:29:06 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [1] to [2]
2020/03/08 18:29:06 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [1] to [2]
leaders[map[]]
2020/03/08 18:29:07 [2] start vote term[1]
2020/03/08 18:29:07 [2] Set term [2]
2020/03/08 18:29:07 [2] vote for [2]
2020/03/08 18:29:07 [1] accept RequestVote from [2] , args:[&{Term:2 CandidateId:2 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:07 [1] vote for [2]
2020/03/08 18:29:07 [1] Set term [2]
2020/03/08 18:29:07 [1] transition to follower [term:2]
2020/03/08 18:29:07 [0] accept RequestVote from [2] , args:[&{Term:2 CandidateId:2 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:07 [0] vote for [2]
2020/03/08 18:29:07 [0] Set term [2]
2020/03/08 18:29:07 [0] transition to follower [term:2]
2020/03/08 18:29:07 [2] vote fail2 from [1]
2020/03/08 18:29:07 [2] vote fail2 from [0]
2020/03/08 18:29:07 [2] transition to follower [term:2]
2020/03/08 18:29:07 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [2] to [3]
2020/03/08 18:29:07 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [2] to [3]
2020/03/08 18:29:07 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [2] to [3]
leaders[map[]]
2020/03/08 18:29:07 [1] start vote term[2]
2020/03/08 18:29:07 [1] Set term [3]
2020/03/08 18:29:07 [1] vote for [1]
2020/03/08 18:29:07 [2] accept RequestVote from [1] , args:[&{Term:3 CandidateId:1 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:07 [2] Set term [3]
2020/03/08 18:29:07 [2] transition to follower [term:3]
2020/03/08 18:29:07 [0] accept RequestVote from [1] , args:[&{Term:3 CandidateId:1 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:07 [0] vote for [1]
2020/03/08 18:29:07 [0] Set term [3]
2020/03/08 18:29:07 [0] transition to follower [term:3]
2020/03/08 18:29:07 [1] vote fail1 from [2]
2020/03/08 18:29:07 [1] vote fail2 from [0]
2020/03/08 18:29:07 [1] transition to follower [term:3]
2020/03/08 18:29:07 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [3] to [4]
2020/03/08 18:29:07 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [3] to [4]
2020/03/08 18:29:07 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [3] to [4]
2020/03/08 18:29:08 [2] start vote term[3]
2020/03/08 18:29:08 [2] Set term [4]
2020/03/08 18:29:08 [2] vote for [2]
2020/03/08 18:29:08 [1] accept RequestVote from [2] , args:[&{Term:4 CandidateId:2 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:08 [1] Set term [4]
2020/03/08 18:29:08 [1] transition to follower [term:4]
2020/03/08 18:29:08 [0] accept RequestVote from [2] , args:[&{Term:4 CandidateId:2 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:08 [0] vote for [2]
2020/03/08 18:29:08 [0] Set term [4]
2020/03/08 18:29:08 [0] transition to follower [term:4]
2020/03/08 18:29:08 [2] vote fail1 from [1]
2020/03/08 18:29:08 [2] vote fail2 from [0]
2020/03/08 18:29:08 [2] transition to follower [term:4]
leaders[map[]]
2020/03/08 18:29:08 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [4] to [5]
2020/03/08 18:29:08 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [4] to [5]
2020/03/08 18:29:08 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [4] to [5]
2020/03/08 18:29:08 [1] start vote term[4]
2020/03/08 18:29:08 [1] Set term [5]
2020/03/08 18:29:08 [1] vote for [1]
2020/03/08 18:29:08 [2] accept RequestVote from [1] , args:[&{Term:5 CandidateId:1 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:08 [2] Set term [5]
2020/03/08 18:29:08 [2] transition to follower [term:5]
2020/03/08 18:29:08 [0] accept RequestVote from [1] , args:[&{Term:5 CandidateId:1 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:08 [0] vote for [1]
2020/03/08 18:29:08 [0] Set term [5]
2020/03/08 18:29:08 [0] transition to follower [term:5]
2020/03/08 18:29:08 [1] vote fail1 from [2]
2020/03/08 18:29:08 [1] vote fail2 from [0]
2020/03/08 18:29:08 [1] transition to follower [term:5]
leaders[map[]]
2020/03/08 18:29:08 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [5] to [6]
2020/03/08 18:29:08 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [5] to [6]
2020/03/08 18:29:08 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [5] to [6]
leaders[map[]]
2020/03/08 18:29:09 [0] start vote term[5]
2020/03/08 18:29:09 [0] Set term [6]
2020/03/08 18:29:09 [0] vote for [0]
2020/03/08 18:29:09 [2] accept RequestVote from [0] , args:[&{Term:6 CandidateId:0 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:09 [1] accept RequestVote from [0] , args:[&{Term:6 CandidateId:0 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:09 [2] vote for [0]
2020/03/08 18:29:09 [1] Set term [6]
2020/03/08 18:29:09 [2] Set term [6]
2020/03/08 18:29:09 [2] transition to follower [term:6]
2020/03/08 18:29:09 [1] transition to follower [term:6]
2020/03/08 18:29:09 [0] vote fail1 from [1]
2020/03/08 18:29:09 [0] vote fail2 from [2]
2020/03/08 18:29:09 [0] transition to follower [term:6]
2020/03/08 18:29:09 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [6] to [7]
2020/03/08 18:29:09 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [6] to [7]
leaders[map[]]
2020/03/08 18:29:09 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [6] to [7]
2020/03/08 18:29:09 [0] start vote term[6]
2020/03/08 18:29:09 [0] Set term [7]
2020/03/08 18:29:09 [0] vote for [0]
2020/03/08 18:29:09 [2] accept RequestVote from [0] , args:[&{Term:7 CandidateId:0 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:09 [2] vote for [0]
2020/03/08 18:29:09 [1] accept RequestVote from [0] , args:[&{Term:7 CandidateId:0 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:09 [2] Set term [7]
2020/03/08 18:29:09 [2] transition to follower [term:7]
2020/03/08 18:29:09 [1] vote for [0]
2020/03/08 18:29:09 [1] Set term [7]
2020/03/08 18:29:09 [1] transition to follower [term:7]
2020/03/08 18:29:09 [0] vote fail2 from [2]
2020/03/08 18:29:09 [0] vote fail2 from [1]
2020/03/08 18:29:09 [0] transition to follower [term:7]
2020/03/08 18:29:09 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [7] to [8]
leaders[map[]]
2020/03/08 18:29:10 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [7] to [8]
2020/03/08 18:29:10 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [7] to [8]
2020/03/08 18:29:10 [0] start vote term[7]
2020/03/08 18:29:10 [0] Set term [8]
2020/03/08 18:29:10 [0] vote for [0]
2020/03/08 18:29:10 [2] accept RequestVote from [0] , args:[&{Term:8 CandidateId:0 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:10 [2] vote for [0]
2020/03/08 18:29:10 [2] Set term [8]
2020/03/08 18:29:10 [1] accept RequestVote from [0] , args:[&{Term:8 CandidateId:0 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:10 [2] transition to follower [term:8]
2020/03/08 18:29:10 [1] vote for [0]
2020/03/08 18:29:10 [1] Set term [8]
2020/03/08 18:29:10 [1] transition to follower [term:8]
2020/03/08 18:29:10 [0] vote fail2 from [2]
2020/03/08 18:29:10 [0] vote fail2 from [1]
2020/03/08 18:29:10 [0] transition to follower [term:8]
2020/03/08 18:29:10 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [8] to [9]
leaders[map[]]
2020/03/08 18:29:10 [2020-03-08 18:29:06.004516 +0800 CST m=+0.001240003]-[2] transitionToCandidate update term from [8] to [9]
2020/03/08 18:29:10 [2020-03-08 18:29:06.0045 +0800 CST m=+0.001223793]-[1] transitionToCandidate update term from [8] to [9]
2020/03/08 18:29:10 [0] start vote term[8]
2020/03/08 18:29:10 [0] Set term [9]
2020/03/08 18:29:10 [0] vote for [0]
2020/03/08 18:29:10 [2] accept RequestVote from [0] , args:[&{Term:9 CandidateId:0 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:10 [1] accept RequestVote from [0] , args:[&{Term:9 CandidateId:0 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 18:29:10 [2] vote for [0]
2020/03/08 18:29:10 [2] Set term [9]
2020/03/08 18:29:10 [2] transition to follower [term:9]
2020/03/08 18:29:10 [1] vote for [0]
2020/03/08 18:29:10 [1] Set term [9]
2020/03/08 18:29:10 [1] transition to follower [term:9]
2020/03/08 18:29:10 [0] vote fail2 from [2]
2020/03/08 18:29:10 [0] vote fail2 from [1]
2020/03/08 18:29:10 [0] transition to follower [term:9]
2020/03/08 18:29:10 [2020-03-08 18:29:06.00433 +0800 CST m=+0.001053628]-[0] transitionToCandidate update term from [9] to [10]
leaders[map[]]
2020/03/08 18:29:11 [0] crash
2020/03/08 18:29:11 [1] crash
2020/03/08 18:29:11 [2] crash
--- FAIL: TestInitialElection2A (5.00s)
    config.go:332: expected one leader, got none
FAIL
exit status 1
FAIL    _/workspace/go/map_reduce/src/raft      5.007s
sh-3.2#
