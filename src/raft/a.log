sh-3.2# go test -run TestReElection2A
2020/03/08 20:39:42 [0] transition to follower [term:0]
2020/03/08 20:39:42 [node:0][role:1][term:0]start
2020/03/08 20:39:42 [1] transition to follower [term:0]
2020/03/08 20:39:42 [node:1][role:1][term:0]start
2020/03/08 20:39:42 [2] transition to follower [term:0]
2020/03/08 20:39:42 [node:2][role:1][term:0]start
Test (2A): election after network failure ...
2020/03/08 20:39:42 [1] transitionToCandidate update term from [0] to [1]
2020/03/08 20:39:42 [0] transitionToCandidate update term from [0] to [1]
2020/03/08 20:39:42 [2] transitionToCandidate update term from [0] to [1]
leaders[map[]]
2020/03/08 20:39:42 [1] start vote term[0]
2020/03/08 20:39:42 [1] Set term [1]
2020/03/08 20:39:42 [1] vote for [1]
2020/03/08 20:39:42 [0] accept RequestVote from [1] , args:[&{Term:1 CandidateId:1 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 20:39:42 [2] accept RequestVote from [1] , args:[&{Term:1 CandidateId:1 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 20:39:42 [0] Set term [1]
2020/03/08 20:39:42 [0] transition to follower [term:1]
2020/03/08 20:39:42 [2] Set term [1]
2020/03/08 20:39:42 [2] transition to follower [term:1]
2020/03/08 20:39:42 [0] vote for [1]
2020/03/08 20:39:42 [2] vote for [1]
2020/03/08 20:39:42 [1] vote succeed from [0]
2020/03/08 20:39:42 [1] vote succeed from [2]
2020/03/08 20:39:42 [1] election #win transition to leader [term:1]
2020/03/08 20:39:42 [0] transitionToCandidate update term from [1] to [2]
2020/03/08 20:39:42 [0] transition to follower [term:1]
2020/03/08 20:39:42 [2] transitionToCandidate update term from [1] to [2]
2020/03/08 20:39:42 [2] transition to follower [term:1]
leaders[map[1:[1]]]
pass -------1--------
2020/03/08 20:39:43 [2] transitionToCandidate update term from [1] to [2]
2020/03/08 20:39:43 [0] transitionToCandidate update term from [1] to [2]
2020/03/08 20:39:43 [2] start vote term[1]
2020/03/08 20:39:43 [2] Set term [2]
2020/03/08 20:39:43 [2] vote for [2]
2020/03/08 20:39:43 [0] accept RequestVote from [2] , args:[&{Term:2 CandidateId:2 LastLogIndex:0 LastLogTerm:0}]
2020/03/08 20:39:43 [0] Set term [2]
2020/03/08 20:39:43 [0] transition to follower [term:2]
2020/03/08 20:39:43 [0] vote for [2]
2020/03/08 20:39:43 [2] vote succeed from [0]
2020/03/08 20:39:43 [2] election #win transition to leader [term:2]
leaders[map[2:[2]]]
pass -------2--------
2020/03/08 20:39:43 vote err
2020/03/08 20:39:43 [0] transitionToCandidate update term from [2] to [3]
2020/03/08 20:39:43 [0] transition to follower [term:2]
leaders[map[1:[1] 2:[2]]]
pass -------3--------
2020/03/08 20:39:44 [0] transitionToCandidate update term from [2] to [3]
2020/03/08 20:39:44 [0] start vote term[2]
2020/03/08 20:39:44 [0] Set term [3]
2020/03/08 20:39:44 [0] vote for [0]
2020/03/08 20:39:44 vote err
2020/03/08 20:39:44 vote err
2020/03/08 20:39:44 [0] transition to follower [term:3]
2020/03/08 20:39:45 [0] transitionToCandidate update term from [3] to [4]
2020/03/08 20:39:45 [0] start vote term[3]
2020/03/08 20:39:45 [0] Set term [4]
2020/03/08 20:39:45 [0] vote for [0]
2020/03/08 20:39:45 vote err
2020/03/08 20:39:45 vote err
2020/03/08 20:39:45 [0] transition to follower [term:4]
2020/03/08 20:39:46 [0] transitionToCandidate update term from [4] to [5]
2020/03/08 20:39:46 [0] crash
2020/03/08 20:39:46 [1] crash
2020/03/08 20:39:46 [2] crash
--- FAIL: TestReElection2A (4.03s)
    config.go:358: expected no leader, but 1 claims to be leader
FAIL
exit status 1
FAIL    _/workspace/go/map_reduce/src/raft      4.037s
sh-3.2#
